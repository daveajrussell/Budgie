<div class="animated fadeIn">
  <div class="row">
    <div class="col-sm-6 col-lg-3">
      <div class="card">
        <div class="card-body pb-0">
          <span class="float-left mr-3 mt-2">
            <a (click)="goBack()">
              <i class="icon-arrow-left"></i>
            </a>
          </span>
          <span class="float-left">
            <h4 class="mb-0 text-primary">{{month}}</h4>
            <p class="text-muted text-uppercase font-weight-bold font-xs">{{year}}</p>
          </span>
          <span class="float-right mt-2">
            <a (click)="goForward()">
              <i class="icon-arrow-right"></i>
            </a>
          </span>
        </div>
      </div>
    </div>
    <div class="col-sm-6 col-lg-3">
      <div class="card">
        <div class="card-body pb-0">
          <h4 class="mb-0 text-primary">£{{budget.totalBudgeted}}</h4>
          <p class="text-muted text-uppercase font-weight-bold font-xs">Total budgeted</p>
        </div>
      </div>
    </div>
    <div class="col-sm-6 col-lg-3">
      <div class="card">
        <div class="card-body pb-0">
          <h4 class="mb-0 text-primary">£{{budget.totalSaved}}</h4>
          <p class="text-muted text-uppercase font-weight-bold font-xs">Total saved</p>
        </div>
      </div>
    </div>
    <div class="col-sm-6 col-lg-3">
      <div class="card">
        <div class="card-body pb-0">
          <h4 class="mb-0 text-success" [class.textSuccess]="budget.incomeVsExpenditure >= 0" [class.textDanger]="budget.incomeVsExpenditure < 0">
            <span *ngIf="budget.incomeVsExpenditure >= 0">+</span>
            <span *ngIf="budget.incomeVsExpenditure < 0">-</span>
            £{{budget.incomeVsExpenditure}}
          </h4>
          <p class="text-muted text-uppercase font-weight-bold font-xs">Income/expenditure</p>
        </div>
      </div>
    </div>
    <!--/.col-->
  </div>
  <div class="row">
    <div class="col-md-4">
      <div class="card">
        <div class="card-body">
          <table class="table">
            <thead>
              <tr>
                <th colspan="2">Incomes</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let income of budget.incomes">
                <td>{{income.name}}</td>
                <td>{{income.total}}</td>
              </tr>
            </tbody>
          </table>
          <table class="table">
            <thead>
              <tr>
                <th colspan="2">Dedicated outgoings</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of budget.dedicated">
                <td>{{item.name}}</td>
                <td>{{item.budgeted}}</td>
              </tr>
            </tbody>
          </table>
          <table class="table">
            <thead>
              <tr>
                <th colspan="2">Budgeted outgoings</th>
              </tr>
            </thead>
            <tbody>
              <table class="table table-sm" *ngFor="let item of budget.budgeted">
                <thead>
                  <tr>
                    <th colspan="2">
                      {{item.name}}
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Budgeted</td>
                    <td>£{{item.budgeted}}</td>
                  </tr>
                  <tr>
                    <td>Actual</td>
                    <td>£{{item.actual}}</td>
                  </tr>
                  <tr>
                    <td>Remaining</td>
                    <td>£{{item.remaining}}</td>
                  </tr>
                </tbody>
              </table>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <!--/.col-->
    <div class="col-md-8">
      <div class="card">
        <div class="card-body">
          <table class="table">
            <thead>
              <tr>
                <th>Date</th>
                <th>Category</th>
                <th>Type</th>
                <th>Amount</th>
                <th>Notes</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let transaction of budget.transactions">
                <td>{{transaction.date}}</td>
                <td>{{transaction.category}}</td>
                <td>{{transactionTypeKeys[transaction.type]}}</td>
                <td>£{{transaction.amount}}</td>
                <td></td>
              </tr>
            </tbody>
          </table>
          <div class="form-group row">
            <div class="col-md-12">
              <button type="button" class="btn btn-outline-primary btn-sm" data-toggle="modal" (click)="newTransactionModal.show()">
                Add a transaction
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!--/.col-->
  </div>
</div>

<div bsModal #newTransactionModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Add a transaction</h4>
        <button type="button" class="close" (click)="newTransactionModal.hide()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-sm-12">
            <div class="form-group">
              <label for="name">Date</label>
              <input type="text" class="form-control" [bsConfig]="bsConfig" [minDate]="minDate" [maxDate]="maxDate" bsDatepicker [(ngModel)]="bsValue">
            </div>
          </div>
        </div>
        <!--/.row-->
        <div class="row">
          <div class="form-group col-sm-12">
            <label for="type">Category</label>
            <select class="form-control" id="category">

            </select>
          </div>
        </div>
        <!--/.row-->
        <div class="row">
          <div class="col-sm-12">
            <div class="form-group">
              <label for="name">Amount</label>
              <input type="text" class="form-control">
            </div>
          </div>
        </div>
        <!--/.row-->
        <div class="row">
          <div class="col-sm-12">
            <div class="form-group">
              <label for="name">Notes</label>
              <input type="text" class="form-control">
            </div>
          </div>
        </div>
        <!--/.row-->
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="newTransactionModal.hide()">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
    <!-- /.modal-content -->
  </div>
  <!-- /.modal-dialog -->
</div>
<!-- /.modal -->